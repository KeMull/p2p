window.onload=function(){var f,p=["1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function t(){var t=document.getElementById("verifyCanvas"),e=t.getContext("2d");e.fillStyle="cornflowerblue",e.fillRect(0,0,t.width,t.height),e.fillStyle="white",e.font="25px Arial",f=new Array;for(var n=new Array,o=new Array,a=0;a<4;a++)f[a]=p[Math.floor(Math.random()*p.length)],n[a]=16*a+10,o[a]=20*Math.random()+20,e.fillText(f[a],n[a],o[a]);for(var i,r,a=0;a<3;a++)i=t,(r=e).moveTo(Math.floor(Math.random()*i.width),Math.floor(Math.random()*i.height)),r.lineTo(Math.floor(Math.random()*i.width),Math.floor(Math.random()*i.height)),r.lineWidth=.5,r.strokeStyle="rgba(50,50,50,0.3)",r.stroke();for(var l,s,h,d,a=0;a<30;a++)l=t,s=e,0,h=Math.floor(Math.random()*l.width),d=Math.floor(Math.random()*l.height),s.moveTo(h,d),s.lineTo(h+1,d+1),s.lineWidth=.2,s.stroke();!function(t){document.getElementById("verifyCanvas").style.display="none";var e=document.getElementById("code_img");e.src=t.toDataURL("image/png")}(t)}t(),document.getElementById("code_img").onclick=function(){$("#verifyCanvas").remove(),$("#verify").after('<canvas width="100" height="40" id="verifyCanvas"></canvas>'),t()},$("#verify").blur(function(){$(this).val()==f.join("")||($(this).closest(".input-group").append("<span style='color:red'>验证码错误,区分大小写</span>"),$(this).val().length<4&&$(this).siblings("span").hide())})},$(function(){$("#myuser").blur(function(){$(this);var t=$(this).val();t?/^[a-zA-Z0-9_-]{4,16}$/.test(t)?$.ajax({url:"http://172.16.14.254:4343/login.php",type:"post",data:"username="+t,dataType:"json",success:function(t){}}):($(this).siblings("span").remove(),$(this).closest(".input-group").append("<span style='color:red'>请输入正确的用户名</span>"),0):($(this).siblings("span").remove(),$(this).closest(".input-group").append("<span style='color:red'>请输入用户名</span>"),0)})});